(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{398:function(t,e,n){var content=n(443);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(55).default)("b8c0662e",content,!0,{sourceMap:!1})},442:function(t,e,n){"use strict";n(398)},443:function(t,e,n){var o=n(54)(!1);o.push([t.i,"#scriptable-code[data-v-cbf295e8]{width:100%;height:512px;overflow-x:hidden;overflow-y:scroll;overflow:hidden scroll}.demo-video[data-v-cbf295e8]{height:700px;max-width:100%;margin:0 auto;display:block;border-radius:16px;box-shadow:0 0 16px rgba(0,0,0,.05)}",""]),t.exports=o},469:function(t,e,n){"use strict";n.r(e);var o=n(6),r=(n(73),n(56),n(36),n(13),n(64),n(65),n(41),n(115),n(40),{head:function(){return{title:"iOS 小工具"}},data:function(){return{courseData:[]}},created:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getMyCourse();case 2:case"end":return e.stop()}}),e)})))()},methods:{getMyCourse:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,r,c,l,d,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.$store.state,o=n.year,r=n.sem,c=n.department,l="my-couse-data-".concat(o,"-").concat(r),"main"!=c&&(l+="-".concat(c)),d=JSON.parse(localStorage[l]||"[]"),e.next=6,t.$fetchCourse(o,r,c);case 6:m=e.sent,t.courseData=m.filter((function(t){return d.includes(t.id)})).map((function(t){return{name:t.name.zh,time:t.time,classroom:t.classroom.map((function(t){return t.name})).join("、").trimEllip(13),link:"https://ntut-course.gnehs.net/course/".concat(o,"/").concat(r,"/").concat(t.id)}}));case 8:case"end":return e.stop()}}),e)})))()},doCopy:function(){var t=this;try{window.gtag("event","copy_ios_widget_code")}catch(t){}this.$copyText(this.$refs["scriptable-code"].textContent).then((function(e){t.$vs.notification({title:"已複製",text:"請到 Scriptable 貼上程式碼即可使用小工具"})}),(function(e){t.$vs.notification({title:"複製失敗",color:"danger",text:"請嘗試手動複製"})}))}}}),c=(n(442),n(35)),component=Object(c.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h1",[t._v("iOS 小工具")]),t._v(" "),n("p",[t._v("新增小工具在你的桌面上，隨時檢視接下來的課程！")]),t._v(" "),n("p",[t._v("注意：如果你變更了課程，需要重新複製程式碼才能讓小工具使用最新的課程資料！")]),t._v(" "),t.courseData.length?t._e():n("vs-alert",{attrs:{color:"danger"},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("沒有課程資料")]},proxy:!0}],null,!1,1917420833)},[t._v("\n      請先新增課程資料\n    ")]),t._v(" "),t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),n("p",[t._v("建立一個 Script 並貼上以下程式碼")]),t._v(" "),n("div",{staticClass:"white-box",staticStyle:{position:"relative"}},[n("div",{staticStyle:{position:"absolute",right:"0"}},[n("vs-button",{on:{click:t.doCopy}},[n("i",{staticClass:"bx bx-clipboard"}),t._v("複製\n        ")])],1),t._v(" "),n("pre",{ref:"scriptable-code",attrs:{id:"scriptable-code"}},[t._v("const courseData = "+t._s(JSON.stringify(t.courseData))+"\nfunction getUpcomingCourse() {\n    let currentDate = new Date()\n    let timetable = {\n        '1': '8:10',\n        '2': '9:10',\n        '3': '10:10',\n        '4': '11:10',\n        N: '12:10',\n        '5': '13:10',\n        '6': '14:10',\n        '7': '15:10',\n        '8': '16:10',\n        '9': '17:10',\n        A: '18:30',\n        B: '19:20',\n        C: '20:20',\n        D: '21:10'\n    }\n    let dateEng2zh = { sun: '週日', mon: '週一', tue: '週二', wed: '週三', thu: '週四', fri: '週五', sat: '週六' }\n    // show upcoming course\n    let upcomingCourseIncludes = Object.entries(timetable)\n        .filter(([courseId, courseTime]) => {\n            let tempDate = new Date()\n            tempDate.setHours(courseTime.split(':')[0], courseTime.split(':')[1], 0)\n            return tempDate > currentDate\n        })\n        .map(x => x[0])\n    let todayDayOfWeek = Object.keys(dateEng2zh)[currentDate.getDay()]\n    return courseData\n        .filter(x => x.time[todayDayOfWeek].some(r => upcomingCourseIncludes.includes(r))).map(x => ({\n            ...x,\n            start: timetable[x.time[todayDayOfWeek][0]],\n            length: x.time[todayDayOfWeek].length,\n        }))\n        .sort((a, b) => a.time[todayDayOfWeek][0] - b.time[todayDayOfWeek][0])\n}\nfunction createWidget() {\n    let gradient = new LinearGradient()\n    gradient.locations = [0, 1]\n    gradient.colors = [\n        new Color(\"292929\"),\n        new Color(\"141414\")\n    ]\n\n    let widget = new ListWidget()\n    widget.backgroundGradient = gradient\n\n    let titleTxt = widget.addText('接下來的課程')\n    titleTxt.textColor = Color.white()\n    titleTxt.textOpacity = 0.7\n    titleTxt.font = Font.mediumSystemFont(13)\n\n    widget.addSpacer(7)\n    let upcomingCourse = getUpcomingCourse()\n    if (upcomingCourse.length) {\n        let course = upcomingCourse[0]\n        let courseTxt = widget.addText(course.name)\n        courseTxt.textColor = Color.white()\n        courseTxt.font = Font.boldSystemFont(16)\n\n        widget.addSpacer(2)\n        if (course.classroom != '') {\n            let classTxt = widget.addText(course.classroom)\n            classTxt.textColor = Color.white()\n            classTxt.font = Font.systemFont(13)\n        }\n        let summaryTxt = widget.addText(`於 ${course.start} 開始，共 ${course.length} 節`)\n        summaryTxt.textColor = Color.white()\n        summaryTxt.font = Font.systemFont(13)\n        if (config.runsWithSiri) {\n            Speech.speak(` 你在 ${course.start} 有一堂 ${course.name}`)\n        } else {\n            widget.addSpacer()\n            // Add button to open course detail\n            let linkSymbol = SFSymbol.named(\"arrow.up.forward.square\")\n            let footerStack = widget.addStack()\n            let linkStack = footerStack.addStack()\n            linkStack.centerAlignContent()\n            linkStack.url = course.link\n            let linkElement = linkStack.addText(\"詳細資料\")\n            linkElement.font = Font.mediumSystemFont(13)\n            linkElement.textColor = Color.blue()\n            linkStack.addSpacer(3)\n            let linkSymbolElement = linkStack.addImage(linkSymbol.image)\n            linkSymbolElement.imageSize = new Size(13, 13)\n            linkSymbolElement.tintColor = Color.blue()\n            footerStack.addSpacer()\n            // Add link to open course detail\n            let iconElement = footerStack.addText(\"🍤\")\n            iconElement.textOpacity = 0.5\n            iconElement.font = Font.mediumSystemFont(13)\n            iconElement.url = `http://ntut-course.gnehs.net/`\n        }\n    } else {\n        let courseTxt = widget.addText('沒有課程')\n        courseTxt.textColor = Color.white()\n        courseTxt.font = Font.boldSystemFont(18)\n        if (config.runsWithSiri) {\n            Speech.speak(` 好棒，你今天沒課了`)\n        }\n    }\n    // add footer\n    if (config.runsWithSiri || !upcomingCourse.length) {\n        widget.addSpacer()\n        let footerStack = widget.addStack()\n        let providerText = footerStack.addText(\"🍤 北科課程好朋友\")\n        providerText.textColor = Color.white()\n        providerText.textOpacity = 0.7\n        providerText.font = Font.mediumSystemFont(13)\n        footerStack.url = `http://ntut-course.gnehs.net/`\n    }\n    return widget\n}\n\nlet widget = createWidget()\nif (config.runsInWidget) {\n    Script.setWidget(widget)\n} else {\n    widget.presentMedium()\n}\nScript.complete()\n")])]),t._v(" "),t._m(5),t._v(" "),n("p",[t._v("參考此影片建立你的小工具")]),t._v(" "),t._m(6)],1)}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h2",[n("span",{staticStyle:{color:"rgb(var(--vs-primary))"}},[t._v("Step 0")]),t._v(" 加入課程\n    ")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("\n      請先將你本學期的課程新增到\n      "),n("strong",[t._v("北科課程好朋友")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h2",[n("span",{staticStyle:{color:"rgb(var(--vs-primary))"}},[t._v("Step 1")]),t._v(" 安裝 Scriptable\n    ")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("\n      到 App Store 安裝\n      "),n("a",{attrs:{href:"https://apps.apple.com/tw/app/scriptable/id1405459188",target:"_blank"}},[t._v("Scriptable")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h2",[n("span",{staticStyle:{color:"rgb(var(--vs-primary))"}},[t._v("Step 2")]),t._v(" 複製並貼上程式碼\n    ")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h2",[n("span",{staticStyle:{color:"rgb(var(--vs-primary))"}},[t._v("Step 3")]),t._v(" 新增小工具到桌面\n    ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("video",{staticClass:"demo-video",attrs:{loop:"",controls:"",autoplay:""}},[e("source",{attrs:{src:"/video/how_to_add_iOS_widget.mp4",type:"video/mp4"}})])}],!1,null,"cbf295e8",null);e.default=component.exports}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{148:function(e,t,r){"use strict";var n=r(0),o=r(201);n.default.use(o.a)},149:function(e,t,r){"use strict";var n=r(0),o=r(202),c=r.n(o);n.default.use(c.a)},150:function(e,t,r){"use strict";var n=r(0),o=r(203),c=r.n(o),l=r(204),d=r.n(l);n.default.use(c.a,d.a)},183:function(e,t,r){var content=r(284);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(55).default)("f12cd7be",content,!0,{sourceMap:!1})},185:function(e,t,r){var content=r(295);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(55).default)("37e1e2c9",content,!0,{sourceMap:!1})},206:function(e,t,r){"use strict";r(46),r(47),r(30),r(26),r(48),r(49),r(31);var n=r(6),o=(r(40),r(41),r(84),r(37),r(73),r(13),r(64),r(65),r(36),r(151),r(25),r(116),r(0)),c=r(142);function l(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){l=!0,o=e},f:function(){try{c||null==r.return||r.return()}finally{if(l)throw o}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}var m={data:function(){return{active:"/",yearSemItems:null,yearSemVal:"-1",departmentItems:["日間部","進修部","研究所(日間部、進修部、週末碩士班)"],departmentVal:0,datasetDialog:!1,isIframe:!1,isMobile:!1}},computed:{isAdvancedSearch:function(){return"advanced-search"==this.$route.name&&!this.isMobile}},mounted:function(){"main"!=localStorage["data-department"]&&(this.departmentVal=this.departmentItems.indexOf(localStorage["data-department"]))},created:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,d,m,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return m=function(e){document.body.setAttribute("vs-theme",e?"dark":"light")},"iframe"==e.$route.query.mode&&(e.isIframe=!0),o.default.prototype.$openDatasetDialog=function(){e.datasetDialog=!0},setInterval((function(){try{document.getElementById("app").style=""}catch(e){}}),1e3),r=window.matchMedia("(max-width: 768px)"),e.isMobile=r.matches,r.addListener((function(t){e.isMobile=t.matches})),d=window.matchMedia("(prefers-color-scheme: dark)"),m(d.matches),d.addListener((function(e){var t=e.matches;m(t)})),String.prototype.trimEllip=function(e){return this.length>e?this.substring(0,e)+"...":this},e.$vlf.config({name:"ntut-course",version:1,storeName:"course_compressed",description:"course data"}),window.$ntutCourse={},e.$vlf.iterate((function(t,r){e.$getStore(r)})),o.default.prototype.$getStore=function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(r){var data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.$ntutCourse[r]){t.next=2;break}return t.abrupt("return",window.$ntutCourse[r]);case 2:return t.next=4,e.$vlf.getItem(r);case 4:if(data=t.sent){t.next=7;break}return t.abrupt("return",null);case 7:if(data=c.a.inflate(data,{level:6}),!((data=JSON.parse(new TextDecoder("utf-8").decode(data))).expiration<Date.now())){t.next=11;break}return t.abrupt("return",null);case 11:return window.$ntutCourse[r]=data.data,t.abrupt("return",data.data);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o.default.prototype.$setStore=function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(r,n){var o,data,l=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=l.length>2&&void 0!==l[2]?l[2]:1,window.$ntutCourse[r]=n,data={expiration:(new Date).getTime()+24*o*60*60*1e3,data:n},data=(new TextEncoder).encode(JSON.stringify(data)),data=c.a.deflate(data,{level:6}),t.next=7,e.$vlf.setItem(r,data);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),o.default.prototype.$cleanStore=Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return window.$ntutCourse={},t.next=3,e.$vlf.clear();case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)}))),o.default.prototype.$fetchCourse=function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(r,s,n){var o,c,l,d,m,f,h,v,x,y,w=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=!(w.length>3&&void 0!==w[3])||w[3],c=e.$route.query,l=c.year,d=c.sem,m=c.d,l&&d&&m&&(r=l,s=d,n=m),r&&s){t.next=8;break}return t.next=6,e.$fetchYearData();case 6:f=t.sent,localStorage["data-year"]&&localStorage["data-sem"]?(r=localStorage["data-year"],s=localStorage["data-sem"]):(h=Object.keys(f),r=h[h.length-1],s=f[r].length);case 8:return n||(n=localStorage["data-department"]||"main",e.departmentVal=e.departmentItems.indexOf(n),-1==e.departmentVal&&(e.departmentVal=0)),e.yearSemVal="".concat(r,"-").concat(s),v="course_".concat(r,"_").concat(s,"_").concat(n),t.prev=11,t.next=14,e.$getStore(v);case 14:if(y=t.sent){t.next=23;break}return x=e.$vs.loading({text:"下載課程清單..."}),t.next=19,fetch("https://gnehs.github.io/ntut-course-crawler-node/".concat(r,"/").concat(s,"/").concat(n,".json")).then((function(e){return e.json()}));case 19:return y=t.sent,t.next=22,e.$setStore(v,y);case 22:x.close();case 23:return o&&(e.$store.commit("updateYear",r),e.$store.commit("updateSem",s),e.$store.commit("updateDepartment",n)),t.abrupt("return",y);case 27:t.prev=27,t.t0=t.catch(11),e.$vs.notification({title:"擷取資料時發生了錯誤",text:t.t0,color:"danger"}),x.close(),e.$store.commit("updateYear","112"),e.$store.commit("updateSem","1"),e.$store.commit("updateDepartment","main");case 34:case"end":return t.stop()}}),t,null,[[11,27]])})));return function(e,r,n){return t.apply(this,arguments)}}(),o.default.prototype.$fetchYearData=Object(n.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="main_year",t.prev=1,t.next=4,fetch("https://gnehs.github.io/ntut-course-crawler-node/main.json").then((function(e){return e.json()}));case 4:return n=t.sent,sessionStorage[r]=JSON.stringify(n),t.abrupt("return",JSON.parse(sessionStorage[r]));case 9:t.prev=9,t.t0=t.catch(1),e.$vs.notification({title:"擷取資料時發生了錯誤",text:t.t0,color:"danger"});case 12:case"end":return t.stop()}}),t,null,[[1,9]])}))),o.default.prototype.$checkIsInCourse=function(t){var r=e.$store.state,n=r.year,o=r.sem,c="my-couse-data-".concat(n,"-").concat(o),l=JSON.parse(localStorage[c]||"[]");return Boolean(l.includes(t))},o.default.prototype.$checkConflictedCourse=function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(r){var n,o,c,d,m,f,h,v,x,y,w,k,S,_,I,C,O=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return v=function(a,b){for(var e=0,t=Object.entries(a.time);e<t.length;e++){var r,i=t[e],n=l(i[1]);try{for(n.s();!(r=n.n()).done;){var o=r.value;if(b.time[i[0]].includes(o))return!0}}catch(e){n.e(e)}finally{n.f()}}return!1},n=O.length>1&&void 0!==O[1]&&O[1],o=e.$store.state,c=o.year,d=o.sem,m="my-couse-data-".concat(c,"-").concat(d),f=JSON.parse(localStorage[m]||"[]"),t.next=7,e.$fetchCourse(c,d);case 7:h=t.sent.filter((function(e){return f.includes(e.id)})),x=[],y=l(r);try{for(y.s();!(w=y.n()).done;){k=w.value,S=l(h);try{for(S.s();!(_=S.n()).done;)I=_.value,v(k,I)&&k.id!=I.id&&(C=n?I.id:k.id,x.includes(C)||x.push(C))}catch(e){S.e(e)}finally{S.f()}}}catch(e){y.e(e)}finally{y.f()}return t.abrupt("return",x);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o.default.prototype.$addCourse=function(t){var r=e.$store.state,n=r.year,o=r.sem,c="my-couse-data-".concat(n,"-").concat(o),l=JSON.parse(localStorage[c]||"[]");l.includes(t)||l.push(t),localStorage[c]=JSON.stringify(l)},o.default.prototype.$removeCourse=function(t){var r=e.$store.state,n=r.year,o=r.sem,c="my-couse-data-".concat(n,"-").concat(o),l=JSON.parse(localStorage[c]||"[]");l=l.filter((function(e){return e!=t})),localStorage[c]=JSON.stringify(l)},o.default.prototype.$getWithdrawalRate=Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$getStore("withdrawalRate");case 2:if(r=t.sent){t.next=9;break}return t.next=6,fetch("https://gnehs.github.io/ntut-course-crawler-node/analytics/withdrawal-rate.json").then((function(e){return e.json()}));case 6:return r=t.sent,t.next=9,e.$setStore("withdrawalRate",r,30);case 9:return t.abrupt("return",r);case 10:case"end":return t.stop()}}),t)}))),t.next=26,e.initYearSem();case 26:return t.next=28,e.$fetchCourse();case 28:e.$router.beforeEach((function(t,r,n){e.active=t.path,n()}));try{(f=indexedDB.open("ntut-course")).onerror=function(){e.$vs.notification({sticky:!0,title:"無法使用 IndexedDB",text:"這可能會造成部分功能無法如常運作，若你正使用 Firefox 且開啟了隱私模式，請關閉隱私模式或使用其他瀏覽器。",color:"danger",duration:864e5})},f.onsuccess=function(){f.result.close()}}catch(e){}case 30:case"end":return t.stop()}}),t)})))()},methods:{trackBtn:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"toggle_table_view";try{window.gtag("event",e)}catch(e){}},initYearSem:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,o,c,d,m,f,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$fetchYearData();case 2:r=t.sent,n=[],o=l(Object.keys(r).reverse());try{for(o.s();!(c=o.n()).done;){d=c.value,m=l(r[d].reverse());try{for(m.s();!(f=m.n()).done;)h=f.value,n.push("".concat(d,"-").concat(h))}catch(e){m.e(e)}finally{m.f()}}}catch(e){o.e(e)}finally{o.f()}e.yearSemItems=n,e.departmentVal=n[0];case 8:case"end":return t.stop()}}),t)})))()},parseYearSemVal:function(e){var s=e.split("-");return"".concat(s[0]," 年").concat("1"==s[1]?"上":"下","學期")},datasetSelected:function(){var s=this.yearSemVal.split("-"),e=this.departmentItems[this.departmentVal];0==this.departmentVal&&(e="main"),this.$fetchCourse(s[0],s[1],e)}}},f=m,h=(r(283),r(35)),component=Object(h.a)(f,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[e.isIframe||e.isAdvancedSearch?e._e():r("vs-navbar",{attrs:{"center-collapsed":"",shadow:"",fixed:"","not-line":""},scopedSlots:e._u([{key:"left",fn:function(){return[r("router-link",{staticClass:"site-title",attrs:{to:"/"},on:{click:function(t){return e.trackBtn("nav_logo_click")}}},[e._v("🍤 北科課程好朋友\n      ")])]},proxy:!0},{key:"right",fn:function(){return[r("vs-button",{attrs:{disabled:Boolean(e.$route.query.year)},on:{click:function(t){e.datasetDialog=!0,e.trackBtn("nav_dataset_click")}}},[e._v(e._s(e.parseYearSemVal(e.yearSemVal)))])]},proxy:!0}],null,!1,2114822412),model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[e._v(" "),r("universal-search",{attrs:{navbar:""}})],1),e._v(" "),r("div",{class:{container:!e.isAdvancedSearch,isIframe:e.isIframe}},[r("Nuxt")],1),e._v(" "),e.isIframe&&!e.isAdvancedSearch?r("div",{staticClass:"text-footer"},[e._v("\n    本資料由\n    "),r("a",{attrs:{href:"https://ntut-course.gnehs.net/",target:"_blank"}},[e._v("北科課程好朋友")]),e._v("\n    提供\n  ")]):e._e(),e._v(" "),e.isIframe||e.isAdvancedSearch?e._e():r("footer",{attrs:{id:"footer"}},[r("div",{staticClass:"lr-container nowrap"},[e._m(0),e._v(" "),r("div",{staticClass:"r"},[r("vs-button",{attrs:{icon:"",transparent:"",href:"https://github.com/gnehs/ntut-course-web",blank:""}},[r("i",{staticClass:"bx bxl-github"})])],1)])]),e._v(" "),r("vs-dialog",{scopedSlots:e._u([{key:"header",fn:function(){return[r("h4",[e._v("選擇資料集")])]},proxy:!0},{key:"footer",fn:function(){return[r("div",{staticClass:"datasetDialog-footer"},[r("vs-button",{attrs:{block:""},on:{click:function(t){e.datasetDialog=!1}}},[e._v("完成")])],1)]},proxy:!0}]),model:{value:e.datasetDialog,callback:function(t){e.datasetDialog=t},expression:"datasetDialog"}},[e._v(" "),r("div",{staticClass:"datasetDialog-form"},[e.yearSemItems?r("vs-select",{attrs:{label:"學期"},on:{change:e.datasetSelected},model:{value:e.yearSemVal,callback:function(t){e.yearSemVal=t},expression:"yearSemVal"}},[r("vs-option",{attrs:{label:"選擇學期",value:"no",disabled:""}},[e._v("選擇學期")]),e._v(" "),e._l(e.yearSemItems,(function(t,i){return r("vs-option",{key:i,attrs:{label:e.parseYearSemVal(t),value:t}},[e._v("\n          "+e._s(e.parseYearSemVal(t))+"\n        ")])}))],2):e._e(),e._v(" "),r("br"),e._v(" "),r("vs-select",{attrs:{label:"學制"},on:{change:e.datasetSelected},model:{value:e.departmentVal,callback:function(t){e.departmentVal=t},expression:"departmentVal"}},[r("vs-option",{attrs:{label:"選擇學制",value:"no",disabled:""}},[e._v("選擇學制")]),e._v(" "),e._l(e.departmentItems,(function(t,i){return r("vs-option",{key:i,attrs:{label:t,value:i}},[e._v(e._s(t))])}))],2)],1)])],1)}),[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"l"},[e._v("\n        Developed by\n        "),r("a",{staticStyle:{"margin-left":"0.2em"},attrs:{href:"https://gnehs.net",target:"_blank"}},[e._v("勝勝")])])}],!1,null,null,null);t.a=component.exports;installComponents(component,{UniversalSearch:r(228).default})},228:function(e,t,r){"use strict";r.r(t);r(26),r(48),r(49),r(37),r(57),r(38),r(58);var n=r(22),o=r(85),c=r(6);r(13),r(89),r(25),r(116),r(46),r(56),r(36),r(64),r(65),r(73),r(41),r(47),r(30),r(209),r(210),r(211),r(212),r(213),r(214),r(215),r(216),r(217),r(218),r(219),r(220),r(221),r(222),r(223),r(224),r(225),r(31),r(226),r(227),r(208),r(115),r(293),r(40);function l(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function d(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}function m(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){l=!0,o=e},f:function(){try{c||null==r.return||r.return()}finally{if(l)throw o}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}var h={data:function(){return{searchInput:"",searchAutocompleteItems:[],currentSelectionIndex:-1,loading:!1}},mounted:function(){this.loadSearchHistory()},watch:{currentSelectionIndex:function(){this.currentSelectionIndex>=0&&this.scrollSelectionIntoView()},year:function(e,t){this.fetchCourseData()},sem:function(e,t){this.fetchCourseData()}},props:{navbar:{type:Boolean,default:!1}},methods:{loadSearchHistory:function(){this.searchAutocompleteItems=JSON.parse(localStorage["search-history"]||"[]").reverse()},fetchCourseData:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.loading=!0,e.courseData){t.next=5;break}return t.next=4,e.$fetchCourse();case 4:e.courseData=t.sent;case 5:return e.loading=!1,t.abrupt("return",e.courseData);case 7:case"end":return t.stop()}}),t)})))()},searchInputChange:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var r,n,c,l,d,f,h,v,x,y,w;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return function(){return Math.random().toString(36).substring(2,15)},r=localStorage["data-year"],n=localStorage["data-sem"],c=localStorage["data-department"],t.next=6,e.fetchCourseData();case 6:l=t.sent,d=e.searchInput;try{d=d.toLowerCase()}catch(e){}if(f=[],d){h=d.split(" "),!isNaN(d)&&d.length>=3&&f.push.apply(f,Object(o.a)(l.filter((function(e){return e.id.includes(d)})).map((function(e){return{id:"".concat(r,"/").concat(n,"/").concat(e.id),type:"course",to:"/course/".concat(r,"/").concat(n,"/").concat(e.id),category:e.id,text:e.name.zh}})).slice(0,10))),f.push.apply(f,Object(o.a)(Array.from(new Set(l.map((function(e){return e.class})).flat(2).map((function(e){return e.name})).filter((function(e){return e.toLowerCase().includes(d)})))).map((function(e){return{id:"/class/".concat(r,"/").concat(n,"/").concat(e,"?d=").concat(c),type:"class",to:"/class/".concat(r,"/").concat(n,"/").concat(e,"?d=").concat(c),category:"班級",text:e}})).slice(0,10))),f.push.apply(f,Object(o.a)(Array.from(new Set(l.map((function(e){return e.teacher})).flat(2).map((function(e){return e.name})).filter((function(e){return e.toLowerCase().includes(d)})))).map((function(e){return{id:"teacher/".concat(e),type:"teacher",to:"/teacher/".concat(e),category:"教師",text:e}})).slice(0,10))),v=l,x=m(h);try{for(w=function(){var e=y.value;v=v.filter((function(t){var r,n;return(null===(r=t.name)||void 0===r?void 0:r.zh.toLowerCase().includes(e))||(null===(n=t.name)||void 0===n?void 0:n.en.toLowerCase().includes(e))||t.teacher.map((function(e){return e.name})).join(" ").toLowerCase().includes(e)||t.class.map((function(e){return e.name})).join(" ").toLowerCase().includes(e)}))},x.s();!(y=x.n()).done;)w()}catch(e){x.e(e)}finally{x.f()}f.push.apply(f,Object(o.a)(v.map((function(e){return{id:"".concat(r,"/").concat(n,"/").concat(e.id),type:"course",to:"/course/".concat(r,"/").concat(n,"/").concat(e.id),category:"".concat(e.id," ").concat(e.teacher.map((function(e){return e.name})).join(" ")),text:e.name.zh,course:e}})).sort((function(a,b){return h.some((function(e){return a.text.toLowerCase().includes(e)}))?-1:1})).slice(0,20))),e.searchAutocompleteItems=f.slice(0,50)}else e.loadSearchHistory();e.currentSelectionIndex=-1,e.$refs.searchInput.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"});case 13:case"end":return t.stop()}}),t)})))()},scrollSelectionIntoView:function(){this.$nextTick((function(){document.querySelector(".search-autocomplete-items .search-autocomplete-item.focus").scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})}))},onArrowUp:function(){this.currentSelectionIndex>=0&&this.currentSelectionIndex--},onArrowDown:function(){this.currentSelectionIndex<this.searchAutocompleteItems.length-1&&this.currentSelectionIndex++},onFocus:function(){this.currentSelectionIndex=-1},onBlur:function(){this.currentSelectionIndex=-1},onEsc:function(){this.currentSelectionIndex=-1,this.$refs.searchInput.blur()},selectCurrentSelection:function(){this.currentSelectionIndex>=0&&this.selectItem(this.searchAutocompleteItems[this.currentSelectionIndex])},selectItem:function(e){var t=JSON.parse(localStorage["search-history"]||"[]");t.push(d(d({},e),{},{history:!0})),t=t.slice(-10).reverse().filter((function(e,i,a){return a.findIndex((function(t){return t.id===e.id}))===i})).reverse(),localStorage["search-history"]=JSON.stringify(t),e.to&&(this.$router.push(e.to),this.onEsc())}}},v=(r(294),r(35)),component=Object(v.a)(h,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"search-box-container",class:{navbar:e.navbar}},[r("div",{staticClass:"search-box"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.searchInput,expression:"searchInput"}],ref:"searchInput",attrs:{type:"text",placeholder:"搜尋課程、教師或是班級⋯",autocomplete:"off"},domProps:{value:e.searchInput},on:{input:[function(t){t.target.composing||(e.searchInput=t.target.value)},e.searchInputChange],focus:e.onFocus,blur:e.onBlur,keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:(t.preventDefault(),e.onArrowDown.apply(null,arguments))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:(t.preventDefault(),e.onArrowUp.apply(null,arguments))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")&&e._k(t.keyCode,"tab",9,t.key,"Tab")?null:(t.preventDefault(),e.selectCurrentSelection.apply(null,arguments))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:(t.preventDefault(),e.onEsc.apply(null,arguments))}],mouseenter:function(t){e.currentSelectionIndex=-1}}}),e._v(" "),e.searchInput.length?r("button",{on:{click:function(t){e.searchInput="",e.searchInputChange()}}},[r("i",{staticClass:"bx bx-x"})]):r("button",[e.loading?r("i",{staticClass:"bx bx-loader-alt bx-spin"}):r("i",{staticClass:"bx bx-search"})])]),e._v(" "),r("div",{staticClass:"search-autocomplete-items"},e._l(e.searchAutocompleteItems,(function(t,i){return r("div",{key:t.id,staticClass:"search-autocomplete-item",class:{focus:e.currentSelectionIndex==i},on:{click:function(r){return e.selectItem(t)},mousedown:function(e){e.preventDefault()},mouseenter:function(t){e.currentSelectionIndex=i}}},[r("div",{staticClass:"search-autocomplete-item-content"},[r("div",{staticClass:"search-autocomplete-item-category"},[e._v("\n          "+e._s(t.category)+"\n        ")]),e._v(" "),r("div",{staticClass:"search-autocomplete-item-text"},[e._v("\n          "+e._s(t.text)+"\n        ")])]),e._v(" "),t.history?r("div",{staticClass:"search-autocomplete-item-icon"},[e.currentSelectionIndex==i?r("i",{staticClass:"bx bx-right-arrow-alt"}):r("i",{staticClass:"bx bx-history"})]):r("div",{staticClass:"search-autocomplete-item-icon"},[r("i",{staticClass:"bx bx-right-arrow-alt"})])])})),0)])}),[],!1,null,"0096f5ae",null);t.default=component.exports},234:function(e,t,r){r(235),e.exports=r(236)},279:function(e,t,r){var content=r(280);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(55).default)("2998b330",content,!0,{sourceMap:!1})},280:function(e,t,r){var n=r(54)(!1);n.push([e.i,"body{--text-color-value:var(--vs-text);--text-color:rgba(var(--text-color-value),1);--border-color:rgba(var(--text-color-value),.1);--border-focus-color:rgba(var(--text-color-value),.2);--border-width:1px;--transition:0.15s ease;--padding:8px;--primary-color:#007bff}@media (perfer-color-scheme:dark){body{--text-color-value:var(--vs-text);--border-color:rgba(var(--text-color-value),.1);--border-focus-color:rgba(var(--text-color-value),.2);--primary-color:#7eb5f0}}",""]),e.exports=n},281:function(e,t,r){var content=r(282);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(55).default)("66aba195",content,!0,{sourceMap:!1})},282:function(e,t,r){var n=r(54)(!1);n.push([e.i,'*{box-sizing:border-box}body{font-family:"Roboto Condensed","Noto Sans TC",sans-serif;background-color:#f4f7f8;margin:0}@media (prefers-color-scheme:dark){body{background-color:#1d1d1d;color:#fff}}code,pre{font-family:"Roboto Mono","Noto Sans TC",monospace}code{background:rgba(var(--vs-text),.01);border-radius:4px;padding:0 4px;line-height:1.5em;border:1px solid rgba(var(--vs-text),.1);font-size:.95em}hr{border:0;border-top:1px solid rgba(0,0,0,.1)}a{color:rgba(var(--vs-primary),1)}@media (prefers-color-scheme:dark){a{--vs-primary:247,250,255}}a:hover{color:rgba(var(--vs-primary),.8)}a:active{color:rgba(var(--vs-primary),.9)}h1,h2,h3,h4,h5,h6,p{margin:1em 0;line-height:1.5em}h1+p,h2+p,h3+p,h4+p,h5+p,h6+p{margin-top:-1em}.site-title{font-weight:700;color:rgba(var(--vs-text),1);text-decoration:none}.site-title:hover{color:rgba(var(--vs-text),.8)}.vs-input{width:100%}.vs-alert+.vs-alert{margin-top:8px}.lr-container{display:flex;align-items:center}@media screen and (max-width:768px){.lr-container:not(.nowrap){display:block}}.lr-container .l{flex:1}.lr-container .r{text-align:right;justify-content:flex-end}.lr-container .l,.lr-container .r{display:flex;align-items:center}.cards{width:calc(100% + 12px);display:flex;flex-direction:row;flex-wrap:wrap;margin:3px -6px;--card-row:3;--card-row-sm:2;position:relative}.cards .vs-card-content,.cards>.card,.cards>.cards{width:calc(100%/var(--card-row) - 12px);margin:6px}@media screen and (max-width:768px){.cards .vs-card-content,.cards>.card,.cards>.cards{width:calc(100%/var(--card-row-sm) - 12px)}}.cards>.cards{width:calc(100%/var(--card-row));margin:0;flex-wrap:nowrap}@media screen and (max-width:768px){.cards>.cards{width:calc(100%/var(--card-row-sm))}}.cards>.cards>.card{width:100%}.grid-cards{display:grid;grid-gap:12px;gap:12px;grid-template-columns:repeat(auto-fill,minmax(250px,1fr))}@media screen and (max-width:768px){.grid-cards{grid-template-columns:repeat(2,1fr)}}.flip-card-move{transition:all .4s ease}.flip-card-enter,.flip-card-leave-to{opacity:0;transform:scale(0)}.flip-card-leave-active{position:absolute!important}.search-detail-enter-active{max-height:500px}.search-detail-enter-active,.search-detail-leave-active{transition:all .3s linear}.search-detail-enter,.search-detail-leave-to{opacity:0;height:0;overflow:hidden;transform:translateY(-20px)}.center{display:flex;align-items:center;justify-content:center;padding:20px;flex-wrap:wrap}.timetable{font-size:.85em}.timetable .header{top:0}.timetable .header .item{padding:4px 12px;background:rgba(var(--vs-text),.05);text-align:center;cursor:pointer}.timetable .header .item:hover{background:rgba(var(--vs-text),.1)}.timetable .header .item:first-child{padding:0}.timetable .content:nth-child(2n){background:rgba(var(--vs-gray-1),1)}.timetable .content .item{display:flex;height:50px}.timetable .content .item .course{cursor:pointer;width:100%;--main-color:rgba(var(--vs-text),.9);--main-bg:rgba(var(--vs-primary),0.15);background:var(--main-bg);color:var(--main-color);padding:12px 2px 12px 6px;transition:all .25s ease;height:100%;display:flex;align-items:center;position:relative}.timetable .content .item .course:hover{--main-bg:rgba(var(--vs-primary),0.2);border:1px solid rgba(var(--vs-primary),.2)}.timetable .content .item .course:active{--main-bg:rgba(var(--vs-primary),0.25)}.timetable .content .item .course.conflict{--main-color:rgba(var(--vs-danger),1);--main-bg:rgba(var(--vs-danger),.2)}.timetable .content .item .course.conflict:hover{--main-bg:rgba(var(--vs-danger),.25)}.timetable .content .item .course.conflict:active{--main-bg:rgba(var(--vs-danger),.3)}.timetable .content,.timetable .header{display:grid;grid-template-columns:1.25em repeat(5,1fr)}.timetable .content .item:first-child,.timetable .header .item:first-child{background:rgba(var(--vs-text),.05);font-size:1.15em;display:flex;align-items:center;justify-content:center;cursor:pointer}.timetable .content .item:first-child:hover,.timetable .header .item:first-child:hover{background:rgba(var(--vs-text),.1)}.grid-timetable{display:grid;--gap:8px;grid-gap:var(--gap);gap:var(--gap)}@media screen and (max-width:700px){.grid-timetable{--gap:4px}}.grid-timetable .decoration-item{background:rgba(var(--vs-text),.05)}.grid-timetable .decoration-border-item{border-top:1px solid rgba(var(--vs-text),.05);transform:translateY(calc(var(--gap)/-2))}.grid-timetable .weekday-item{text-align:center;padding:8px 16px;font-size:.85em}.grid-timetable .time-item{padding:0 2px;font-size:.85em;display:flex;align-items:center;justify-content:center;min-height:3em}@media screen and (max-width:700px){.grid-timetable .time-item{min-height:2em}}.grid-timetable .course-item{cursor:pointer;width:100%;--main-color:rgba(var(--vs-text),.9);--main-bg:rgba(var(--vs-primary),0.15);background:var(--main-bg);color:var(--main-color);padding:12px 8px;border-radius:8px;transition:background .1s ease;height:100%;display:flex;flex-direction:column;align-items:flex-start;position:relative;justify-content:space-between;grid-gap:4px;gap:4px;text-decoration:none;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);z-index:1;will-change:background}@media screen and (max-width:700px){.grid-timetable .course-item{padding:4px;font-size:14px;border-radius:4px}}.grid-timetable .course-item .course-name{font-weight:700}.grid-timetable .course-item .course-info{opacity:.75;font-size:.85em}.grid-timetable .course-item:hover{--main-bg:rgba(var(--vs-primary),0.2)}.grid-timetable .course-item:active{--main-bg:rgba(var(--vs-primary),0.25)}.grid-timetable .course-item.course-conflict{--main-color:#fff;--main-bg:red;pointer-events:none}.list .item{padding:10px 12px;background:rgba(var(--vs-background),1)}.list .item:first-child{border-radius:8px 8px 0 0}.list .item:last-child{border-radius:0 0 8px 8px}.list .item:hover{background:rgba(var(--vs-gray-1),1);cursor:pointer}.list .item+.item{border-top:1px solid rgba(var(--vs-gray-2),1)}.white-box{background:#fff;padding:8px 16px;margin:8px 0;border-radius:8px}@media (prefers-color-scheme:dark){.white-box{background:#343434}}.vs-select--state-dark .vs-select__input{color:rgba(var(--vs-text),1);background:rgba(var(--vs-text),.05)}.vs-select--state-dark .vs-icon-arrow:after,.vs-select--state-dark .vs-icon-arrow:before{background:rgba(var(--vs-text),1)}',""]),e.exports=n},283:function(e,t,r){"use strict";r(183)},284:function(e,t,r){var n=r(54)(!1);n.push([e.i,"#app{display:flex;flex-direction:column;min-height:100vh}#app .container{flex:1;width:1024px;max-width:97%;margin:0 auto}#app .container:not(.isIframe){padding-top:74px}#app .text-footer{text-align:center;font-size:.75em;margin:16px 0;opacity:.75}#app #footer{margin:10px auto 0;text-align:center;font-size:.85rem;opacity:.7;padding:0 15px;width:100%;background:rgba(var(--vs-background),1);border-radius:15px 15px 0 0;box-shadow:0 5px 25px 0 rgba(0,0,0,var(--vs-shadow-opacity))}.datasetDialog-form .vs-select-content{max-width:100%}",""]),e.exports=n},294:function(e,t,r){"use strict";r(185)},295:function(e,t,r){var n=r(54)(!1);n.push([e.i,".search-box-container[data-v-0096f5ae]{position:relative;width:100%;margin:0 auto;--margin-top:8px;--padding:calc(var(--margin-top)*2) calc(var(--margin-top)*3)}.search-box-container.navbar[data-v-0096f5ae]{width:512px;--margin-top:4px}@media screen and (max-width:768px){.search-box-container.navbar[data-v-0096f5ae]{width:324px}}.search-box-container .search-box[data-v-0096f5ae]{display:flex;border-radius:8px;background:rgba(var(--vs-text),.1);border:1px solid rgba(var(--vs-text),0);transition:all .2s ease}@media (prefers-color-scheme:dark){.search-box-container .search-box[data-v-0096f5ae]{background:rgba(var(--vs-text),.05)}}.search-box-container .search-box[data-v-0096f5ae]:hover{background:rgba(var(--vs-text),.05)}@media (prefers-color-scheme:dark){.search-box-container .search-box[data-v-0096f5ae]:hover{background:rgba(var(--vs-text),.075)}}.search-box-container .search-box[\\:has\\(input\\:focus\\)][data-v-0096f5ae]{background:rgba(var(--vs-gray-1),1);border:1px solid rgba(var(--vs-gray-4),1);box-shadow:0 5px 20px 0 rgba(0,0,0,.05);box-shadow:0 5px 20px 0 rgba(0,0,0,var(--vs-shadow-opacity,.05))}.search-box-container .search-box[data-v-0096f5ae]:has(input:focus){background:rgba(var(--vs-gray-1),1);border:1px solid rgba(var(--vs-gray-4),1);box-shadow:0 5px 20px 0 rgba(0,0,0,.05);box-shadow:0 5px 20px 0 rgba(0,0,0,var(--vs-shadow-opacity,.05))}@media (prefers-color-scheme:dark){.search-box-container .search-box[\\:has\\(input\\:focus\\)][data-v-0096f5ae]{background-color:rgba(var(--vs-background),1);border:1px solid rgba(var(--vs-text),.05)}.search-box-container .search-box[data-v-0096f5ae]:has(input:focus){background-color:rgba(var(--vs-background),1);border:1px solid rgba(var(--vs-text),.05)}}.search-box-container .search-box button[data-v-0096f5ae],.search-box-container .search-box input[data-v-0096f5ae]{border:none;outline:none;padding:var(--padding);background-color:transparent;font-size:16px;color:rgba(var(--vs-text),1)}.search-box-container .search-box input[data-v-0096f5ae]{flex:1;scroll-margin-top:50px}.search-box-container .search-box button[data-v-0096f5ae]{cursor:pointer;color:rgba(var(--vs-text),.8);display:flex;align-items:center;justify-content:center;transition:all .2s ease}.search-box-container .search-box button i[data-v-0096f5ae]{font-size:24px}.search-box-container .search-box button[data-v-0096f5ae]:hover{color:rgba(var(--vs-text),1)}.search-box-container .search-box button[data-v-0096f5ae]:active{transform:scale(.9)}.search-box-container.navbar .search-box[data-v-0096f5ae]{margin:4px 0}.search-box-container .search-autocomplete-items[data-v-0096f5ae]{position:absolute;border-radius:8px;background-color:rgba(var(--vs-background),1);width:100%;margin-top:var(--margin-top);box-shadow:0 20px 20px 0 rgba(0,0,0,.02);box-shadow:0 20px 20px 0 rgba(0,0,0,var(--vs-background-opacity,.02));max-height:512px;overflow-y:auto;transition:all .2s ease;z-index:999;opacity:0;transform:translateY(-8px);pointer-events:none}@media screen and (max-width:768px){.search-box-container .search-autocomplete-items[data-v-0096f5ae]{max-height:256px}}.search-box-container .search-autocomplete-items .search-autocomplete-item[data-v-0096f5ae]{display:flex;align-items:center;cursor:pointer;overflow:hidden}.search-box-container .search-autocomplete-items .search-autocomplete-item[data-v-0096f5ae]:not(:first-child){border-top:1px solid rgba(var(--vs-gray-4),1)}@media (prefers-color-scheme:dark){.search-box-container .search-autocomplete-items .search-autocomplete-item[data-v-0096f5ae]:not(:first-child){border-top:1px solid rgba(var(--vs-text),.1)}}.search-box-container .search-autocomplete-items .search-autocomplete-item.focus[data-v-0096f5ae]{background:rgba(var(--vs-text),.05)}.search-box-container .search-autocomplete-items .search-autocomplete-item.focus .search-autocomplete-item-icon[data-v-0096f5ae]{transform:translateX(3px)}.search-box-container .search-autocomplete-items .search-autocomplete-item .search-autocomplete-item-content[data-v-0096f5ae]{flex:1;padding:var(--padding)}.search-box-container .search-autocomplete-items .search-autocomplete-item .search-autocomplete-item-content .search-autocomplete-item-category[data-v-0096f5ae]{font-size:12px;opacity:.8}.search-box-container .search-autocomplete-items .search-autocomplete-item .search-autocomplete-item-content .search-autocomplete-item-text[data-v-0096f5ae]{font-size:16px;font-weight:700}.search-box-container .search-autocomplete-items .search-autocomplete-item .search-autocomplete-item-icon[data-v-0096f5ae]{padding:var(--padding);transition:all .2s ease}.search-box-container .search-autocomplete-items .search-autocomplete-item .search-autocomplete-item-icon i[data-v-0096f5ae]{font-size:24px}.search-box-container[\\:has\\(input\\:focus\\)] .search-autocomplete-items[data-v-0096f5ae]{opacity:1;transform:none;pointer-events:all}.search-box-container:has(input:focus) .search-autocomplete-items[data-v-0096f5ae]{opacity:1;transform:none;pointer-events:all}",""]),e.exports=n},296:function(e,t,r){"use strict";r.r(t),r.d(t,"state",(function(){return n})),r.d(t,"mutations",(function(){return o}));var n=function(){return{year:localStorage["data-year"],sem:localStorage["data-sem"],department:localStorage["data-department"]}},o={updateYear:function(e,t){localStorage["data-year"]=t,e.year=t},updateSem:function(e,t){localStorage["data-sem"]=t,e.sem=t},updateDepartment:function(e,t){localStorage["data-department"]=t,e.department=t}}}},[[234,36,2,37]]]);